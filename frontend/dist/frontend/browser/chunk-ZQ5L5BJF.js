import{$ as q,Aa as ae,Ca as y,D as n,E as a,Ea as D,F as C,Fa as se,G as F,Ga as de,Ha as T,I as b,J as N,P as c,Q as V,R as B,S as U,T as O,U as A,Z as W,aa as G,ca as P,da as M,e as $,f as E,h as x,ha as H,ia as L,j as h,ja as z,k as _,n as p,o as f,oa as J,p as k,pa as K,q as d,qa as Q,r as m,ra as X,sa as Y,ta as Z,u as I,ua as ee,va as te,w as u,wa as ie,xa as re,ya as oe,za as ne}from"./chunk-ARQPGS7G.js";var v=(()=>{let e=class e{constructor(t,i,o){this.http=t,this.authService=i,this.settings=o,this.apiUrl="http://127.0.0.1:8000/api/budgets",this.apiUrl=`${this.settings.getApiUrl()}/budgets`}createBudget(t){return this.http.post(`${this.apiUrl}/`,t)}getBudgets(){return this.http.get(`${this.apiUrl}/`)}getBudgetByID(t){return this.http.get(`${this.apiUrl}/${t}`)}updateBudget(t){let i=t.id;return this.http.put(`${this.apiUrl}/${i}/`,t)}deleteBudget(t){return this.http.delete(`${this.apiUrl}/${t}/`)}};e.\u0275fac=function(i){return new(i||e)(x(z),x(de),x(se))},e.\u0275prov=$({token:e,factory:e.\u0275fac,providedIn:"root"});let r=e;return r})();function fe(r,e){if(r&1&&(n(0,"option",13),c(1),a()),r&2){let s=e.$implicit;u("ngValue",s.name),d(),V(s.name)}}var j=(()=>{let e=class e{constructor(t,i){this.budgetService=t,this.router=i,this.formType="Create",this.budget={amount:0,category:{id:0,name:""}},this.afterBudgetCreateEvent=new k,this.categories=[]}createBudget(){console.log("budget is ",this.budget),this.budgetService.createBudget(this.budget).subscribe(t=>{console.log("Expense created successfully:",t),this.budget={amount:0,category:{id:0,name:""}},this.predictedCategory="",this.afterBudgetCreateEvent.emit()})}updateBudget(){this.budgetService.updateBudget(this.budget).subscribe(t=>{console.log("Expense updated successfully:",t),this.router.navigate(["/budgets"])},t=>{console.log("something happend ",t)})}onFormSubmit(){this.formType==="Create"?this.createBudget():this.formType==="Update"&&this.updateBudget()}};e.\u0275fac=function(i){return new(i||e)(m(v),m(y))},e.\u0275cmp=h({type:e,selectors:[["budget-form"]],inputs:{formType:"formType",budget:"budget",categories:"categories"},outputs:{afterBudgetCreateEvent:"afterBudgetCreateEvent"},decls:18,vars:5,consts:[["BudgetForm","ngForm"],[1,"card","p-4","shadow-lg","bg-light","rounded"],[1,"card-title","text-center","mb-4","text-primary"],[1,"form-container",3,"ngSubmit"],[1,"mb-3"],["for","category",1,"form-label"],["id","category","name","category","required","",1,"form-select",3,"ngModelChange","ngModel"],["class","dropdown-item",3,"ngValue",4,"ngFor","ngForOf"],["for","amount",1,"form-label"],["type","number","id","amount","name","amount","required","",1,"form-control",3,"ngModelChange","ngModel"],[1,"row"],[1,"col","d-flex","justify-content-center"],["type","submit",1,"btn","btn-primary"],[1,"dropdown-item",3,"ngValue"]],template:function(i,o){if(i&1){let g=F();n(0,"div",1)(1,"h2",2),c(2),a(),n(3,"form",3,0),b("ngSubmit",function(){return p(g),f(o.onFormSubmit())}),n(5,"div",4)(6,"label",5),c(7,"Category:"),a(),n(8,"select",6),A("ngModelChange",function(l){return p(g),O(o.budget.category.name,l)||(o.budget.category.name=l),f(l)}),I(9,fe,2,2,"option",7),a()(),n(10,"div",4)(11,"label",8),c(12,"Amount (INR):"),a(),n(13,"input",9),A("ngModelChange",function(l){return p(g),O(o.budget.amount,l)||(o.budget.amount=l),f(l)}),a()(),n(14,"div",10)(15,"div",11)(16,"button",12),c(17),a()()()()()}i&2&&(d(2),B("",o.formType," Expense"),d(6),U("ngModel",o.budget.category.name),d(),u("ngForOf",o.categories),d(4),U("ngModel",o.budget.amount),d(4),B("",o.formType," Budget"))},dependencies:[M,Z,ie,re,J,ee,te,K,Q,oe,Y,X]});let r=e;return r})();var be=(r,e,s,t,i,o,g,w)=>({badge:!0,"category-badge":!0,"food-badge":r,"grocery-badge":e,"utilities-badge":s,"clothes-badge":t,"commute-badge":i,"health-badge":o,"entertainment-badge":g,"rent-badge":w});function ye(r,e){if(r&1){let s=F();n(0,"tr",11)(1,"td",12)(2,"span",13),c(3),a()(),n(4,"td"),c(5),q(6,"currency"),a(),n(7,"td",12)(8,"button",14),b("click",function(){let i=p(s).$implicit,o=N();return f(o.deleteBudget(i.id))}),C(9,"i",15),a(),n(10,"button",16),b("click",function(){let i=p(s).$implicit,o=N();return f(o.updateBudget(i.id))}),C(11,"i",17),a()()()}if(r&2){let s=e.$implicit;d(2),u("ngClass",W(6,be,s.category.name==="Food",s.category.name==="Grocery",s.category.name==="Utilities",s.category.name==="Clothes",s.category.name==="Commute",s.category.name==="Health",s.category.name==="Entertainment",s.category.name==="Rent")),d(),B(" ",s.category.name," "),d(2),V(G(6,3,s.amount,"INR"))}}var ue=(()=>{let e=class e{constructor(t,i,o){this.budgetService=t,this.expenseService=i,this.router=o,this.budgets=[],this.categories=[]}ngOnInit(){this.fetchBudgets(),this.fetchCategories()}fetchCategories(){this.expenseService.getCategories().subscribe(t=>{this.categories=t})}fetchBudgets(){this.budgetService.getBudgets().subscribe(t=>{console.log("Response for budgets ",t),this.budgets=t})}deleteBudget(t){confirm("Are you sure you want to delete this budget?")&&this.budgetService.deleteBudget(t).subscribe(()=>{console.log("Budget deleted successfully"),this.fetchBudgets()})}updateBudget(t){this.router.navigate(["/budgets/",t])}};e.\u0275fac=function(i){return new(i||e)(m(v),m(T),m(y))},e.\u0275cmp=h({type:e,selectors:[["app-budget-view"]],decls:19,vars:2,consts:[[1,"row","m-4"],[1,"col-5"],["formType","Create",3,"afterBudgetCreateEvent","categories"],[1,"col"],[1,"card","p-4","shadow-lg","bg-light","rounded"],[1,"card-title","text-center","mb-4","text-primary"],[1,"table-responsive","mt-4"],[1,"table","table-bordered"],[1,"data-table-header"],["scope","col"],["class","data-table-item",4,"ngFor","ngForOf"],[1,"data-table-item"],[1,"text-center"],[3,"ngClass"],["title","Delete",1,"btn","btn-danger",3,"click"],[1,"fa","fa-trash"],["title","Edit",1,"btn","btn-info","mx-2",3,"click"],[1,"fa","fa-edit"]],template:function(i,o){i&1&&(n(0,"div",0)(1,"div",1)(2,"budget-form",2),b("afterBudgetCreateEvent",function(){return o.fetchBudgets()}),a()(),n(3,"div",3)(4,"div",4)(5,"h2",5),c(6,"Budgets "),a(),n(7,"div",6)(8,"table",7)(9,"thead",8)(10,"tr")(11,"th",9),c(12,"Category"),a(),n(13,"th",9),c(14,"Amount"),a(),n(15,"th",9),c(16,"Action"),a()()(),n(17,"tbody"),I(18,ye,12,15,"tr",10),a()()()()()()),i&2&&(d(2),u("categories",o.categories),d(16),u("ngForOf",o.budgets))},dependencies:[P,M,j,H]});let r=e;return r})();var ge=(()=>{let e=class e{constructor(t,i,o,g){this.route=t,this.expenseService=i,this.router=o,this.budgetService=g,this.categories=[]}ngOnInit(){let t=this.route.snapshot.params.budgetId;this.expenseService.getCategories().subscribe(i=>{this.categories=i}),this.budget=this.budgetService.getBudgetByID(t).subscribe(i=>{console.log("Got budget:",i),this.budget=i},i=>{console.error("Theres some error in getting budget:",i)})}updateBudget(){this.budgetService.updateBudget(this.budget).subscribe(t=>{console.log("Budget updated successfully:",t),this.router.navigate(["/budgets"])},t=>{console.log("something happend ",t)})}};e.\u0275fac=function(i){return new(i||e)(m(ae),m(T),m(y),m(v))},e.\u0275cmp=h({type:e,selectors:[["app-budget-update"]],decls:2,vars:2,consts:[[1,"container","mt-5"],["formType","Update",3,"categories","budget"]],template:function(i,o){i&1&&(n(0,"div",0),C(1,"budget-form",1),a()),i&2&&(d(),u("categories",o.categories)("budget",o.budget))},dependencies:[j]});let r=e;return r})();var ve=[{path:"",component:ue},{path:":budgetId",component:ge}],le=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=_({type:e}),e.\u0275inj=E({imports:[D.forChild(ve),D]});let r=e;return r})();var Ge=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=_({type:e}),e.\u0275inj=E({imports:[L,le,ne]});let r=e;return r})();export{Ge as BudgetModule};
