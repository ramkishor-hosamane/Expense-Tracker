import{h as P,i as de}from"./chunk-7WI3RWCC.js";import{$ as y,$a as W,A as g,B as f,Ca as z,Da as H,E as L,Ea as K,Fa as J,G as s,Ga as Q,H as u,La as X,M as j,Ma as Y,Na as Z,O as h,Oa as ee,Pa as te,Qa as ie,Ra as ne,Sa as oe,Ta as re,Ua as me,V as o,Va as ce,W as m,Wa as ae,X as E,Xa as se,Y as k,Za as w,aa as O,ab as le,bb as pe,ga as a,ha as S,ia as M,ja as I,ka as b,la as v,p as A,q as T,s as F,sa as q,ta as V,ua as $,v as C,va as R,w as D,ya as G,za as N}from"./chunk-RE62KFFJ.js";var _=(()=>{let t=class t{constructor(e,i,n){this.http=e,this.authService=i,this.settings=n,this.apiUrl="http://127.0.0.1:8000/api/incomes",this.apiUrl=`${this.settings.getApiUrl()}/incomes`}createIncome(e){return this.http.post(`${this.apiUrl}/`,e)}getIncomes(e){return console.log("Sending requrest to ",this.apiUrl),this.http.get(`${this.apiUrl}/?page=${e}`)}getIncomeByID(e){return this.http.get(`${this.apiUrl}/${e}`)}updateIncome(e){let i=e.id;return this.http.put(`${this.apiUrl}/${i}/`,e)}deleteIncome(e){return this.http.delete(`${this.apiUrl}/${e}/`)}ExportIncomes(){return this.http.get(`${this.apiUrl}/export_incomes/`,{responseType:"blob"})}};t.\u0275fac=function(i){return new(i||t)(F(Q),F(pe),F(le))},t.\u0275prov=A({token:t,factory:t.\u0275fac,providedIn:"root"});let r=t;return r})();function be(r,t){if(r&1&&(o(0,"option",16),a(1),m()),r&2){let c=t.$implicit;h("ngValue",c.value),s(),S(c.value)}}var U=(()=>{let t=class t{constructor(e,i){this.incomeService=e,this.router=i,this.formType="Create",this.income={amount:0,description:"",type:"",date:new Date().toISOString().split("T")[0]},this.afterIncomeCreateEvent=new L,this.income_types={stock:"Stock",buisness:"Buisness",paycheck:"Paycheck",rd:"Recurring Deposit",mf:"Mutual funds"}}createIncome(){console.log("income is ",this.income),this.incomeService.createIncome(this.income).subscribe(e=>{console.log("Income created successfully:",e),this.income={amount:0,description:"",type:"",date:new Date().toISOString().split("T")[0]},this.afterIncomeCreateEvent.emit()})}updateIncome(){this.incomeService.updateIncome(this.income).subscribe(e=>{console.log("Income updated successfully:",e),this.router.navigate(["/incomes"])},e=>{console.log("something happend ",e)})}onFormSubmit(){this.formType==="Create"?this.createIncome():this.formType==="Update"&&this.updateIncome()}};t.\u0275fac=function(i){return new(i||t)(u(_),u(w))},t.\u0275cmp=C({type:t,selectors:[["income-form"]],inputs:{formType:"formType",income:"income"},outputs:{afterIncomeCreateEvent:"afterIncomeCreateEvent"},decls:26,vars:9,consts:[["IncomeForm","ngForm"],[1,"card","p-4","shadow-lg","bg-light","rounded"],[1,"card-title","text-center","mb-4","text-primary"],[1,"form-container",3,"ngSubmit"],[1,"mb-3"],["for","description",1,"form-label"],["type","text","id","description","name","description","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","amount",1,"form-label"],["type","number","id","amount","name","amount","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","category",1,"form-label"],["id","category","name","category","required","",1,"form-select",3,"ngModelChange","ngModel"],["class","dropdown-item",3,"ngValue",4,"ngFor","ngForOf"],["for","date",1,"form-label"],["type","date","id","date","name","date","required","",1,"form-control",3,"ngModelChange","ngModel"],[1,"d-flex","justify-content-center"],["type","submit",1,"btn","btn-primary"],[1,"dropdown-item",3,"ngValue"]],template:function(i,n){if(i&1){let l=k();o(0,"div",1)(1,"h2",2),a(2),m(),o(3,"form",3,0),y("ngSubmit",function(){return g(l),f(n.onFormSubmit())}),o(5,"div",4)(6,"label",5),a(7,"Description:"),m(),o(8,"input",6),v("ngModelChange",function(p){return g(l),b(n.income.description,p)||(n.income.description=p),f(p)}),m()(),o(9,"div",4)(10,"label",7),a(11,"Amount (INR):"),m(),o(12,"input",8),v("ngModelChange",function(p){return g(l),b(n.income.amount,p)||(n.income.amount=p),f(p)}),m()(),o(13,"div",4)(14,"label",9),a(15,"Type:"),m(),o(16,"select",10),v("ngModelChange",function(p){return g(l),b(n.income.type,p)||(n.income.type=p),f(p)}),j(17,be,2,2,"option",11),V(18,"keyvalue"),m()(),o(19,"div",4)(20,"label",12),a(21,"Date:"),m(),o(22,"input",13),v("ngModelChange",function(p){return g(l),b(n.income.date,p)||(n.income.date=p),f(p)}),m()(),o(23,"div",14)(24,"button",15),a(25),m()()()()}i&2&&(s(2),M("",n.formType," Income"),s(6),I("ngModel",n.income.description),s(4),I("ngModel",n.income.amount),s(4),I("ngModel",n.income.type),s(),h("ngForOf",$(18,7,n.income_types)),s(5),I("ngModel",n.income.date),s(3),M("",n.formType," Income"))},dependencies:[N,ie,re,me,X,ne,oe,Y,Z,ce,te,ee,H]});let r=t;return r})();var ve=(r,t,c,e,i,n,l,d,p)=>({badge:!0,"category-badge":!0,"food-badge":r,"grocery-badge":t,"utilities-badge":c,"clothes-badge":e,"commute-badge":i,"health-badge":n,"entertainment-badge":l,"rent-badge":d,"gadgets-badge":p});function Ce(r,t){if(r&1){let c=k();o(0,"tr",16)(1,"td",17),a(2),m(),o(3,"td"),a(4),V(5,"currency"),m(),o(6,"td",18)(7,"span",19),a(8),m()(),o(9,"td"),a(10),V(11,"date"),m(),o(12,"td",18)(13,"button",20),y("click",function(){let i=g(c).$implicit,n=O();return f(n.deleteIncome(i.id))}),E(14,"i",21),m(),o(15,"button",22),y("click",function(){let i=g(c).$implicit,n=O();return f(n.updateIncome(i.id))}),E(16,"i",23),m()()()}if(r&2){let c=t.$implicit;s(2),S(c.description),s(2),S(R(5,5,c.amount,"INR")),s(3),h("ngClass",q(11,ve,[c.type==="Stock",c.type==="Paycheck",c.type==="Utilities",c.type==="Buisness",c.type==="Recurring Deposit",c.type==="Mutual funds",c.type==="Entertainment",c.type==="Rent",c.type==="Gadgets"])),s(),M(" ",c.type," "),s(2),S(R(11,8,c.date,"longDate"))}}var fe=(()=>{let t=class t{constructor(e,i){this.incomeService=e,this.router=i,this.incomes=[],this.currentPage=1,this.noOfIncomes=0,this.types=[],this.sortBy="",this.sortDirection=""}ngOnInit(){this.fetchIncomes()}fetchIncomes(){this.incomeService.getIncomes(this.currentPage).subscribe(e=>{console.log("Response from paginated ",e),this.incomes=e.results,this.noOfIncomes=e.count})}loadPageData(){this.fetchIncomes()}deleteIncome(e){confirm("Are you sure you want to delete this income?")&&this.incomeService.deleteIncome(e).subscribe(()=>{console.log("Income deleted successfully"),this.fetchIncomes()})}updateIncome(e){this.router.navigate(["/incomes/",e])}ExportIncomes(){console.log("Exporting incomes..."),this.incomeService.ExportIncomes().subscribe(e=>{let i=new Blob([e],{type:"text/csv"}),n=window.URL.createObjectURL(i),l=document.createElement("a");l.href=n,l.download="incomes.csv",document.body.appendChild(l),l.click(),window.URL.revokeObjectURL(n),document.body.removeChild(l)},e=>{console.error("Error exporting incomes:",e)})}};t.\u0275fac=function(i){return new(i||t)(u(_),u(w))},t.\u0275cmp=C({type:t,selectors:[["app-income-view"]],decls:29,vars:3,consts:[[1,"container-fluid","my-4"],[1,"row"],[1,"col-md-4","mb-4"],["formType","Create",3,"afterIncomeCreateEvent"],[1,"col-md-8"],[1,"card","p-4","shadow-lg","bg-light","rounded"],[1,"card-title","text-center","mb-4","text-primary"],[1,"d-flex","justify-content-end","mb-4"],[1,"btn","btn-success",3,"click"],[1,"table-responsive","mt-4"],[1,"table","table-bordered"],[1,"data-table-header"],["scope","col"],["class","data-table-item",4,"ngFor","ngForOf"],[1,"d-flex","justify-content-center"],[3,"pageChange","collectionSize","page"],[1,"data-table-item"],[2,"word-break","break-word"],[1,"text-center"],[3,"ngClass"],["title","Delete",1,"btn","btn-danger",3,"click"],[1,"fa","fa-trash"],["title","Edit",1,"btn","btn-info","mx-2",3,"click"],[1,"fa","fa-edit"]],template:function(i,n){i&1&&(o(0,"div",0)(1,"div",1)(2,"div",2)(3,"income-form",3),y("afterIncomeCreateEvent",function(){return n.fetchIncomes()}),m()(),o(4,"div",4)(5,"div",5)(6,"h2",6),a(7,"Incomes"),m(),o(8,"div",7)(9,"button",8),y("click",function(){return n.ExportIncomes()}),a(10,"Export Income"),m()(),o(11,"div",9)(12,"table",10)(13,"thead",11)(14,"tr")(15,"th",12),a(16,"Description"),m(),o(17,"th",12),a(18,"Amount"),m(),o(19,"th",12),a(20,"Income Type"),m(),o(21,"th",12),a(22,"Date"),m(),o(23,"th",12),a(24,"Action"),m()()(),o(25,"tbody"),j(26,Ce,17,21,"tr",13),m()(),o(27,"div",14)(28,"ngb-pagination",15),v("pageChange",function(d){return b(n.currentPage,d)||(n.currentPage=d),d}),y("pageChange",function(){return n.loadPageData()}),m()()()()()()()),i&2&&(s(26),h("ngForOf",n.incomes),s(2),h("collectionSize",n.noOfIncomes),I("page",n.currentPage))},dependencies:[G,N,P,U,K,z]});let r=t;return r})();var he=(()=>{let t=class t{constructor(e,i,n){this.route=e,this.incomeService=i,this.router=n,this.predictedCategory=""}ngOnInit(){let e=this.route.snapshot.params.incomeId;this.income=this.incomeService.getIncomeByID(e).subscribe(i=>{console.log("Got income:",i),this.income=i},i=>{console.error("Theres some error in getting income:",i)})}updateIncome(){this.incomeService.updateIncome(this.income).subscribe(e=>{console.log("Income updated successfully:",e),this.router.navigate(["/incomes"])},e=>{console.log("something happend ",e)})}};t.\u0275fac=function(i){return new(i||t)(u(se),u(_),u(w))},t.\u0275cmp=C({type:t,selectors:[["app-income-update"]],decls:2,vars:1,consts:[[1,"container","mt-5"],["formType","Update",3,"income"]],template:function(i,n){i&1&&(o(0,"div",0),E(1,"income-form",1),m()),i&2&&(s(),h("income",n.income))},dependencies:[U]});let r=t;return r})();var Se=[{path:"",component:fe},{path:":incomeId",component:he}],ye=(()=>{let t=class t{};t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=D({type:t}),t.\u0275inj=T({imports:[W.forChild(Se),W]});let r=t;return r})();var Ke=(()=>{let t=class t{};t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=D({type:t}),t.\u0275inj=T({imports:[J,ye,ae,P,de]});let r=t;return r})();export{Ke as a};
